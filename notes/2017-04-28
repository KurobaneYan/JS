jQuery Deferred can help you write asynchronous code in a synchronous way
